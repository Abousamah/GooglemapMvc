@using Jmelosegui.Mvc.Googlemap.Examples.Controllers
@using Jmelosegui.Mvc.Googlemap.Overlays
@model IEnumerable<MyLocationObject>
@{
    ViewBag.Title = "HeatLayer";
    Layout = "~/Views/Shared/_LayoutExamples.cshtml";
}

@(Html.GoogleMap()
      .Name("map")
      .Height(350)
      .Center(c => c.Latitude(37.774546)
                .Longitude(-122.433523))
      .MapTypeId(MapTypes.Satellite)
      .Zoom(13)
      .Layers(layer => layer.AddHeatLayer()
                            .Dissipating(true)
                            .MaxIntensity(1)
                            .Opacity(.5M)
                            .Radius(50)
                            .Gradient(color =>
                            {
                                color.Add(Color.Yellow);
                                color.Add(Color.Blue);
                                color.Add("#123698");
                            })
                            .BindTo<MyLocationObject, HeatmapLayer>
                            (Model, mappings => mappings.For<MyLocationObject>
                                (
                                    binding => binding.ItemDataBound
                                        (
                                            (heatmap, myLocationObject) =>
                                            {
                                                heatmap.AddPoint(
                                                    new Location
                                                    {
                                                        Latitude = myLocationObject.Latitude,
                                                        Longitude = myLocationObject.Longitude
                                                    });
                                            }
                                        )
                                )
                            )
            )
)